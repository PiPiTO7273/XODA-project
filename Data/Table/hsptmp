#include"d3m.hsp"

/////////////////////////////////////////////////////////////////////////////
#module __ScriptExecutionTime__

#uselib "winmm.dll"
#cfunc timer "timeGetTime"
#func timeBeginPeriod "timeBeginPeriod" int
#func timeEndPeriod "timeEndPeriod" int

#deffunc ScriptExecutionTimeinit
		timeBeginPeriod 1
		time_s=timer()
		return
		
	#defcfunc GetScriptExecutionTime
		timeEndPeriod 1
		return (timer()-time_s)
	
#global __ScriptExecutionTime__
////////////////////////////////////////////////////////////////////////////////

screen 0,ginfo(20),ginfo(21),,-5,0
randomize
mouse 0,0

ScriptExecutionTimeinit //タイマー開始
repeat
        fps=d3getfps()
	color rnd(256),rnd(256),rnd(256):boxf
	
	if maxfps<fps:maxfps=fps
	if GetScriptExecutionTime()>=10000:break
	
await 16:loop

redraw 0
cls 4
color 255,255:font"",50:pos ginfo(10)/12,ginfo(11)/12
mes "最大FPS:"+maxfps+"fps"
